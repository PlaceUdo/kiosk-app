<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>음식 주문 시스템</title>
  <script src="https://cdn.tailwindcss.com?version=3.4.16"></script>
<style>
    * {
        font-family: 'Gulim', '굴림', sans-serif;
        font-weight: bold;
    }

    #menu-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        gap: 1rem;
        height: auto;
        overflow: hidden;
        padding: 1rem 2rem;
        line-height: 1.5;
        cursor: pointer;
    }

  .menu-item {
        height: 27vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }

  .menu-item img {
        max-width: 100%;
        height: auto;
        object-fit: cover;
    }

  .menu-item p {
        text-align: center;
        font-size: 1rem;
        line-height: 1.5;
    }

  .menu-item p:nth-child(2) {
        font-weight: bold;
        margin-bottom: 5px;
    }

    @media (max-width: 768px) {
        #menu-container {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 480px) {
        #menu-container {
            grid-template-columns: repeat(1, 1fr);
        }
    }

  .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center; /* 팝업 내용물을 가로 중앙 정렬 */
        align-items: center; /* 팝업 내용물을 세로 중앙 정렬 */
        z-index: 1000;
    }

  .popup-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        max-width: 90%;
        max-height: 90%;
        overflow: auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

  .popup-image {
        max-width: 80%;
        max-height: 80vh;
        object-fit: contain;
    }

  .popup-buttons {
        display: flex;
        justify-content: space-around;
        width: 100%;
        margin-top: 20px;
    }

  .hot-button {
        background-color: red;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }

  .ice-button {
        background-color: blue;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }

  .sold-out {
        position: relative;
    }

  .sold-out img {
        filter: grayscale(100%);
        opacity: 0.7;
    }

  .sold-out::before {
        content: "Sold Out";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.5rem;
        color: #8B0000;
        font-weight: bold;
        z-index: 10;
        opacity: 1;
    }

</style>
</head>

<body class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4 text-center">Non-Coffee</h1>

  <div class="menu-grid w-full" id="menu-container"></div> 

  <div class="popup" id="popup">
    <div class="popup-content">
      <button id="close-popup" class="absolute top-4 right-4 text-white">닫기</button>
      <img src="" alt="" class="popup-image" id="popup-image">
      <div class="popup-buttons">
        <button class="hot-button">HOT</button>
        <button class="ice-button">ICE</button>
      </div>
    </div>
  </div>

  <script>
    const menuItems = [
      {name: "캐모마일", price: 6000, image: "images/ChamomileTea.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "청귤차", price: 6000, image: "images/GreenTangerineTea.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "한라봉차", price: 6000, image: "images/HallabongTea.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "초코라떼", price: 7000, image: "images/ChocolateLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "녹차라떼", price: 7000, image: "images/GreenTeaLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "딸기밀크티라떼", price: 7000, image: "images/StrawberryMilkTeaLatte.png", availableOptions: ["ice"], soldOut: true},
      {name: "청귤에이드", price: 7000, image: "images/GreenTangerineAde.png", availableOptions: ["ice"], soldOut: false},
      {name: "한라봉에이드", price: 7000, image: "images/HallabongAde.png", availableOptions: ["ice"], soldOut: false},
      {name: "블루레몬에이드", price: 7000, image: "images/BlueLemonAde.png", availableOptions: ["ice"], soldOut: false}
    ];

    function formatNumber(number) {
      return number.toLocaleString();
    }

    // 페이지 로드 후 실행
    window.addEventListener('DOMContentLoaded', (event) => {
      const menuContainer = document.getElementById('menu-container');

      menuItems.forEach(item => {
        const menuItem = createMenuItem(item);
        menuContainer.appendChild(menuItem);
      });

      // 메뉴 클릭 이벤트 핸들러
      menuContainer.addEventListener('click', (event) => {
        const target = event.target.closest('.menu-item');
        if (target) {
          const index = Array.from(target.parentNode.children).indexOf(target);
          updatePopupContent(menuItems[index]);
          document.getElementById('popup').style.display = 'flex';
        }
      });

      // 팝업창 외부 클릭 시 닫기
      const popup = document.getElementById('popup');
      popup.addEventListener('click', (event) => {
        if (event.target === popup) {
          popup.style.display = 'none';
        }
      });

      // 닫기 버튼 이벤트 핸들러
      document.getElementById('close-popup').addEventListener('click', () => {
        document.getElementById('popup').style.display = 'none';
      });
    });

    function createMenuItem(item) {
      const menuItem = document.createElement('div');
      menuItem.className = 'border p-4 rounded menu-item';

      const img = document.createElement('img');
      img.src = item.image;
      img.alt = item.name; // alt 속성에 메뉴 이름 추가
      img.width = 225;
      img.height = 225;
      img.className = "object-cover";

      img.onerror = () => {
        console.error("Error loading image:", item.image);
        img.src = "placeholder_image.jpg";
      };

      menuItem.innerHTML = `
        <div class="flex flex-col items-center">
          ${img.outerHTML} 
          <p>${item.name}</p> 
          <p>₩ ${formatNumber(item.price)}</p>
        </div>
      `;

      if (item.soldOut) {
        menuItem.classList.add('sold-out');
        menuItem.onclick = (event) => {
          // 품절된 메뉴는 클릭 이벤트를 막습니다.
          event.stopPropagation(); // 이벤트 버블링 방지
          return false; // 링크 이동 방지
        };
      } else {
        // 품절되지 않은 메뉴는 기존 클릭 이벤트 유지
        menuItem.onclick = () => {
          const index = Array.from(menuItem.parentNode.children).indexOf(menuItem);
          updatePopupContent(menuItems[index]);
          document.getElementById('popup').style.display = 'flex';
        };
      }

      return menuItem;
    }

    function updatePopupContent(item) {
      const popupImage = document.getElementById('popup-image');
      popupImage.src = item.image;
      popupImage.alt = item.name; // alt 속성에 메뉴 이름 추가

      const hotButton = document.querySelector('.hot-button');
      const iceButton = document.querySelector('.ice-button');

      if (item.availableOptions.includes('hot')) {
        hotButton.style.display = 'inline-block';
      } else {
        hotButton.style.display = 'none';
      }

      if (item.availableOptions.includes('ice')) {
        iceButton.style.display = 'inline-block';
      } else {
        iceButton.style.display = 'none';
      }
    }
  </script>
</body>
</html>
