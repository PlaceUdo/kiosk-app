<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>음식 주문 시스템</title>
  <script src="https://cdn.tailwindcss.com?version=3.4.16"></script>
  <style>
    * {
      font-family: 'Gulim', '굴림', sans-serif;
    }

    * {
      font-weight: bold;
    }

    #menu-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 1rem;
      height: auto;
      overflow: hidden;
      padding: 1rem 2rem;
      line-height: 1.5;
      cursor: pointer;
    }

  .menu-item img {
      max-width: 100%;
      height: auto;
      object-fit: cover;
    }

  .menu-item p {
      font-size: 1rem;
      line-height: 1.5;
    }

  .menu-item p:nth-child(2) {
      margin-bottom: 5px;
    }

    @media (max-width: 768px) {
      #menu-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      #menu-container {
        grid-template-columns: repeat(1, 1fr);
      }

    .menu-item p {
        font-size: 0.9rem;
      }
    }

  .menu-item p:nth-child(2) {
      /* 두 번째 <p> 태그 (메뉴 이름) 선택 */
      font-weight: bold;
      /* 굵게 표시 */
      margin-bottom: 5px;
      /* 가격과의 간격 추가 */
    }

  .button-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

  .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      /* 회색 불투명 배경 */
      justify-content: center;
      align-items: center;
      z-index: 1000;
      /* 다른 요소 위에 표시 */
    }

  .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

  .popup-content {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      max-width: 90%;
      max-height: 90%;
      overflow: auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

  .popup-image {
      max-width: 80%;
      max-height: 80vh;
      object-fit: contain;
    }

  .popup-buttons {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin-top: 20px;
    }

  .hot-button {
      background-color: red;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }

  .ice-button {
      background-color: blue;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }

  .back-button {
      padding: 10px 20px;
      font-size: 16px;
    }

  .sold-out {
      /* 품절된 메뉴 아이템 스타일 */
      position: relative;
      /* 자식 요소의 위치를 기준으로 설정 */
    }

  .sold-out img {
      filter: grayscale(100%);
      opacity: 0.7;
      /* 이미지만 반투명하게 */
    }

  .sold-out::before {
      content: "Sold Out";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5rem;
      color: #8B0000;
      font-weight: bold;
      z-index: 10;
      opacity: 1;
      /* 품절 텍스트는 불투명하게 */
    }
  </style>
</head>

<body class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4 text-center">Coffee</h1>

  <div class="menu-grid w-full" id="menu-container"></div> 

  <div class="popup" id="popup">
    <div class="popup-content">
      <button id="close-popup" class="absolute top-4 right-4 text-white">닫기</button>
      <img src="" alt="" class="popup-image" id="popup-image">
      <div class="popup-buttons">
        <button class="hot-button">HOT</button>
        <button class="ice-button">ICE</button>
      </div>
    </div>
  </div>

  <script>
    const menuItems = [
      {name: "아메리카노", price: 6000, image: "images/Americano.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "카페라떼", price: 6000, image: "images/CaffeLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "바닐라라떼", price: 6000, image: "images/VanillaLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "카페모카", price: 7000, image: "images/CaffeMocha.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "우도땅콩크림라떼", price: 7000, image: "images/UdoPeanutCreamLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "흑임자크림라떼", price: 7000, image: "images/BlackSesameCreamLatte.png", availableOptions: ["ice", "hot"], soldOut: false},
      {name: "우도땅콩아이스크림라떼", price: 7000, image: "images/UdoPeanutIceCreamLatte.png", availableOptions: ["ice"], soldOut: false},
      {name: "우도땅콩아포카토", price: 7000, image: "images/UdoPeanutAffogato.png", availableOptions: ["ice"], soldOut: false},
      {name: "에스프레소", price: 7000, image: "images/Espresso.png", availableOptions: ["hot"], soldOut: false}
    ];

    function formatNumber(number) {
      return number.toLocaleString();
    }

    // 페이지 로드 후 실행
    window.addEventListener('DOMContentLoaded', (event) => {
      const menuContainer = document.getElementById('menu-container');

      menuItems.forEach(item => {
        const menuItem = createMenuItem(item);
        menuContainer.appendChild(menuItem);
      });

      // 메뉴 클릭 이벤트 핸들러
      menuContainer.addEventListener('click', (event) => {
        const target = event.target.closest('.menu-item');
        if (target) {
          const index = Array.from(target.parentNode.children).indexOf(target);
          updatePopupContent(menuItems[index]);
          document.getElementById('popup').style.display = 'flex';
        }
      });

      // 팝업창 외부 클릭 시 닫기
      const popup = document.getElementById('popup');
      popup.addEventListener('click', (event) => {
        if (event.target === popup) {
          popup.style.display = 'none';
        }
      });

      // 닫기 버튼 이벤트 핸들러
      document.getElementById('close-popup').addEventListener('click', () => {
        document.getElementById('popup').style.display = 'none';
      });
    });

    function createMenuItem(item) {
      const menuItem = document.createElement('div');
      menuItem.className = 'border p-4 rounded menu-item';

      const img = document.createElement('img');
      img.src = item.image;
      img.alt = item.name; // alt 속성에 메뉴 이름 추가
      img.width = 225;
      img.height = 225;
      img.className = "object-cover";

      img.onerror = () => {
        console.error("Error loading image:", item.image);
        img.src = "placeholder_image.jpg";
      };

      menuItem.innerHTML = `
        <div class="flex flex-col items-center">
          ${img.outerHTML} 
          <p>${item.name}</p> 
          <p>₩ ${formatNumber(item.price)}</p>
        </div>
      `;

      if (item.soldOut) {
        menuItem.classList.add('sold-out');
        menuItem.onclick = (event) => {
          // 품절된 메뉴는 클릭 이벤트를 막습니다.
          event.stopPropagation(); // 이벤트 버블링 방지
          return false; // 링크 이동 방지
        };
      } else {
        // 품절되지 않은 메뉴는 기존 클릭 이벤트 유지
        menuItem.onclick = () => {
          const index = Array.from(menuItem.parentNode.children).indexOf(menuItem);
          updatePopupContent(menuItems[index]);
          document.getElementById('popup').style.display = 'flex';
        };
      }

      return menuItem;
    }

    function updatePopupContent(item) {
      const popupImage = document.getElementById('popup-image');
      popupImage.src = item.image;
      popupImage.alt = item.name; // alt 속성에 메뉴 이름 추가

      const hotButton = document.querySelector('.hot-button');
      const iceButton = document.querySelector('.ice-button');

      if (item.availableOptions.includes('hot')) {
        hotButton.style.display = 'inline-block';
      } else {
        hotButton.style.display = 'none';
      }

      if (item.availableOptions.includes('ice')) {
        iceButton.style.display = 'inline-block';
      } else {
        iceButton.style.display = 'none';
      }
    }
  </script>
</body>

</html>
